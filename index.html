<!doctype html>
<html lang="is">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SendGrid tools</title>

  <!-- html2canvas for PNG export -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    /* Load Basic Sans from /fonts */
    @font-face {
      font-family: "Basic Sans";
      src: url("./fonts/basicsans-regular.woff") format("woff");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    /* UI uses system font */
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      margin: 24px;
      color: #111;
    }

    h1 { font-size: 20px; margin: 0 0 6px; }
    .muted { color:#666; font-size: 12px; margin: 0 0 14px; }

    /* Tabs */
    .tabs { display:flex; gap:8px; margin-bottom:14px; flex-wrap:wrap; }
    .tab-btn {
      cursor:pointer; padding:8px 12px; border-radius:10px; border:1px solid #111;
      background:#fff; color:#111; font-weight:700; font-size:13px;
    }
    .tab-btn.active { background:#111; color:#fff; }
    .tab { display:none; }
    .tab.active { display:block; }

    /* Shared layout */
    .wrap { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; align-items: start; }
    .panel { border: 1px solid #ddd; border-radius: 10px; padding: 14px; }
    .panel h2 { font-size: 16px; margin: 0 0 10px; }
    label { font-size: 12px; font-weight: 600; display:block; margin-top: 10px; }
    input { width:100%; padding:8px; border:1px solid #ccc; border-radius:8px; font-size:14px; }
    textarea {
      width:100%; min-height: 280px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:12px; padding:10px; border:1px solid #ccc; border-radius:8px;
      white-space: pre; overflow:auto;
    }
    .preview { background:#fafafa; padding: 10px; border-radius: 8px; border:1px dashed #ccc; overflow:auto; }
    .btns { display:flex; gap:10px; margin-top: 12px; flex-wrap: wrap; }
    button {
      cursor:pointer; padding:8px 12px; border-radius:8px; border:1px solid #111;
      background:#111; color:#fff; font-weight:700;
    }
    button.ghost { background:#fff; color:#111; }
    .note { font-size:12px; color:#444; margin-top:8px; }

    /* 3-column input */
    .row3 { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; }

    /* UTM controls */
    .toggle-row { display:flex; align-items:center; gap:8px; margin-top: 6px; }
    .toggle-row input[type="checkbox"] { width:auto; transform: translateY(1px); }
    .utm-grid { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; margin-top: 8px; }
    .utm-grid input { font-size:13px; }
    .small { font-size:12px; color:#555; margin-top:6px; }

    /* Fixed-size product card preview frame (optional; card HTML is self-contained) */
    .card-shell {
      margin-top:14px;
      width:420px;
      height:479px;
      border:1px solid #D9D9D9;
      border-radius:16px;
      overflow:hidden;
      box-shadow:0 1px 6px rgba(0,0,0,0.06);
      background:#fff;
      box-sizing:border-box;
      font-family:"Basic Sans", Arial, sans-serif;
    }
  </style>
</head>

<body>
  <h1>SendGrid marketing tools</h1>
  <p class="muted">Two-tools: 3 column block for code view + “Create card” from product url.</p>

  <div class="tabs">
    <button class="tab-btn active" data-tab="tab-3col">3-column block</button>
    <button class="tab-btn" data-tab="tab-card">Create card from url</button>
    <button class="tab-btn" data-tab="tab-2recipes">2-column recipes</button>
    <button class="tab-btn" data-tab="tab-recipe-card">Create recipe card</button>
  </div>

  <!-- ===================== TAB 1: 3-column generator ===================== -->
  <section id="tab-3col" class="tab active">
    <div class="wrap">
      <div class="panel">
        <h2>3-column block</h2>

        <!-- UTM controls -->
        <div class="toggle-row">
          <input id="utmToggle3" type="checkbox" checked />
          <label for="utmToggle3" style="margin:0;">Bæta UTM á vörutengla</label>
        </div>
        <div class="utm-grid" id="utmFields3">
          <div>
            <label style="margin-top:8px;">utm_source</label>
            <input id="utmSource3" value="sendgrid" />
          </div>
          <div>
            <label style="margin-top:8px;">utm_medium</label>
            <input id="utmMedium3" value="email" />
          </div>
          <div>
            <label style="margin-top:8px;">utm_campaign</label>
            <input id="utmCampaign3" value="marketing_single_send" />
          </div>
        </div>
        <div class="small">Ef slökkt er á þessu, fara tenglar inn óbreyttir.</div>

        <div class="row3" id="inputs3col" style="margin-top:12px;"></div>

        <div class="btns">
          <button id="resetBtn3col" class="ghost" type="button">Hreinsa</button>
          <button id="copyBtn3col" type="button">Afrita HTML</button>
        </div>
        <div id="copyStatus3col" class="note"></div>
      </div>

      <div class="panel">
        <h2>Forskoðun</h2>
        <div class="preview" id="preview3col"></div>

        <h2 style="margin-top:14px;">Úttak (copy/paste í SendGrid)</h2>
        <textarea id="output3col" readonly></textarea>
      </div>
    </div>
  </section>

<!-- ===================== TAB: 2-column recipes ===================== -->
<section id="tab-2recipes" class="tab">
  <div class="wrap">
    <div class="panel">
      <h2>2-column recipes</h2>

      <div class="row3" id="inputs2recipes" style="margin-top:12px; grid-template-columns: repeat(2,1fr);"></div>

      <div class="btns">
        <button id="resetBtn2recipes" class="ghost" type="button">Hreinsa</button>
        <button id="copyBtn2recipes" type="button">Afrita HTML</button>
      </div>
      <div id="copyStatus2recipes" class="note"></div>
    </div>

    <div class="panel">
      <h2>Forskoðun</h2>
      <div class="preview" id="preview2recipes"></div>

      <h2 style="margin-top:14px;">Úttak (copy/paste í SendGrid)</h2>
      <textarea id="output2recipes" readonly></textarea>
    </div>
  </div>
</section>

  
  <!-- ===================== TAB 2: Product card builder ===================== -->
  <section id="tab-card" class="tab">
    <div class="wrap">
      <div class="panel">
        <h2>Create card from url</h2>

        <label>Product URL (kronan.is/vara/...)</label>
        <input id="productUrlCard" placeholder="https://kronan.is/vara/100258554" />

        <!-- NEW: optional overrides -->
        <label>Product name (optional edit)</label>
        <input id="manualName" placeholder="(auto-filled after Create card)" />

        <label>Price (optional edit)</label>
        <input id="manualPrice" placeholder="e.g. 489 kr." />

        <div class="btns">
          <button id="createBtnCard" type="button">Create card</button>
          <button id="updateBtnCard" class="ghost" type="button">Update card</button>
          <button id="copyBtnCard" class="ghost" type="button">Copy HTML</button>
          <button id="downloadPngBtnCard" class="ghost" type="button">Download PNG</button>
        </div>

        <div id="statusCard" class="note"></div>
      </div>

      <div class="panel">
        <h2>Forskoðun</h2>
        <div id="previewCard"></div>

        <h2 style="margin-top:14px;">Úttak (copy/paste)</h2>
        <textarea id="outputCard" readonly></textarea>
      </div>
    </div>
  </section>

  <section id="tab-recipe-card" class="tab">
  <div class="wrap">
    <div class="panel">
      <h2>Create recipe card</h2>

      <label>Recipe URL (kronan.is/uppskriftir/...)</label>
      <input id="recipeUrlCard" placeholder="https://kronan.is/uppskriftir/kalkunabringa" />

      <!-- Optional overrides -->
      <label>Title (optional edit)</label>
      <input id="manualRecipeTitle" placeholder="(auto-filled after Create)" />

      <label>Likes (optional edit)</label>
      <input id="manualRecipeLikes" placeholder="e.g. 9" />

      <label>Servings (optional edit)</label>
      <input id="manualRecipeServings" placeholder="e.g. 4" />

      <label>Prep (optional edit)</label>
      <input id="manualRecipePrep" placeholder="e.g. 40 mín." />

      <label>Cook (optional edit)</label>
      <input id="manualRecipeCook" placeholder="e.g. 50 mín." />

      <label>Total (optional edit)</label>
      <input id="manualRecipeTotal" placeholder="e.g. 130 mín." />

      <div class="btns">
        <button id="createBtnRecipe" type="button">Create recipe card</button>
        <button id="updateBtnRecipe" class="ghost" type="button">Update card</button>
        <button id="copyBtnRecipe" class="ghost" type="button">Copy HTML</button>
        <button id="downloadPngBtnRecipe" class="ghost" type="button">Download PNG</button>
      </div>

      <div id="statusRecipe" class="note"></div>
    </div>

    <div class="panel">
      <h2>Forskoðun</h2>
      <div id="previewRecipe"></div>

      <h2 style="margin-top:14px;">Úttak (copy/paste)</h2>
      <textarea id="outputRecipe" readonly></textarea>
    </div>
  </div>
</section>


<script>
/* ===================== Tabs ===================== */
document.querySelectorAll(".tab-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    btn.classList.add("active");
    document.getElementById(btn.dataset.tab).classList.add("active");
  });
});

/* ===================== TAB 1: 3-column generator ===================== */
const NUM_COLUMNS = 3;

const products3col = Array.from({ length: NUM_COLUMNS }, () => ({
  href: "",
  src: "",
  alt: ""
}));

const inputs3colEl = document.getElementById("inputs3col");
const output3colEl = document.getElementById("output3col");
const preview3colEl = document.getElementById("preview3col");
const copyBtn3col = document.getElementById("copyBtn3col");
const resetBtn3col = document.getElementById("resetBtn3col");
const copyStatus3col = document.getElementById("copyStatus3col");

const utmToggle3 = document.getElementById("utmToggle3");
const utmSource3 = document.getElementById("utmSource3");
const utmMedium3 = document.getElementById("utmMedium3");
const utmCampaign3 = document.getElementById("utmCampaign3");
const utmFields3 = document.getElementById("utmFields3");

function renderInputs3col() {
  inputs3colEl.innerHTML = "";
  products3col.forEach((p, idx) => {
    const card = document.createElement("div");
    card.innerHTML = `
      <div style="border:1px solid #eee;border-radius:10px;padding:10px;">
        <strong>Dálkur ${idx+1}</strong>

        <label>Vörutengill (href)</label>
        <input data-k="href" data-i="${idx}" placeholder="https://kronan.is/vara/..." value="${p.href}"/>

        <label>Myndatengill (src)</label>
        <input data-k="src" data-i="${idx}" placeholder="http://cdn.mcauto-images...png" value="${p.src}"/>

        <label>Alt text (valfrjálst)</label>
        <input data-k="alt" data-i="${idx}" placeholder="t.d. Maiskökur" value="${p.alt}"/>
      </div>
    `;
    inputs3colEl.appendChild(card);
  });

  inputs3colEl.querySelectorAll("input").forEach(inp => {
    inp.addEventListener("input", e => {
      const i = Number(e.target.dataset.i);
      const k = e.target.dataset.k;
      products3col[i][k] = e.target.value.trim();
      update3col();
    });
  });
}

const TEMPLATE_3COL = String.raw`<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  /* Mobile-only overrides (Gmail/Android friendly) */
  @media only screen and (max-width:640px),
         only screen and (max-device-width:640px) {

    .responsive-table, [class~="responsive-table"] {
      width: 100% !important;
      margin: 0 auto !important;
      padding: 0 !important; /* avoid double padding from wrapper */
    }

    .column, [class~="column"] {
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
      text-align: center !important;
      margin: 0 auto 20px !important;
      padding: 0 !important; /* prevent compounding widths */
    }

    /* Reliable 28px side gutters per card */
    .mobile-pad, [class~="mobile-pad"] {
      padding-left: 28px !important;
      padding-right: 28px !important;
    }

    .column img, [class~="column"] img {
      width: 100% !important;
      height: auto !important;
      max-width: 100% !important;
      display: block !important;
      margin: 0 auto !important;
    }
  }
  </style>
</head>

<body>
  <table class="responsive-table" width="100%" cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;">
    <tr>
      <!-- First Column -->
      <td class="column" width="33.33%" valign="top" style="padding:10px; font-size:14px; line-height:20px;">
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <!-- Mobile adds 28px L/R here -->
            <td class="mobile-pad" style="padding:0;">
              <a href="{{href1}}">
                <img border="0" style="display:block; max-width:100%; width:100%; height:auto;" width="186" alt="{{alt1}}" src="{{src1}}">
              </a>
            </td>
          </tr>
        </table>
      </td>

      <!-- Second Column -->
      <td class="column" width="33.33%" valign="top" style="padding:10px; font-size:14px; line-height:20px;">
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td class="mobile-pad" style="padding:0;">
              <a href="{{href2}}">
                <img border="0" style="display:block; max-width:100%; width:100%; height:auto;" width="186" alt="{{alt2}}" src="{{src2}}">
              </a>
            </td>
          </tr>
        </table>
      </td>

      <!-- Third Column -->
      <td class="column" width="33.33%" valign="top" style="padding:10px; font-size:14px; line-height:20px;">
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td class="mobile-pad" style="padding:0;">
              <a href="{{href3}}">
                <img border="0" style="display:block; max-width:100%; width:100%; height:auto;" width="186" alt="{{alt3}}" src="{{src3}}">
              </a>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>`;

function buildHtml3col() {
  let html = TEMPLATE_3COL;

  products3col.forEach((p, idx) => {
    const n = idx + 1;

    const finalHref = utmToggle3.checked
      ? addUTM(p.href, {
          utm_source: utmSource3.value.trim(),
          utm_medium: utmMedium3.value.trim(),
          utm_campaign: utmCampaign3.value.trim()
        })
      : (p.href || "#");

    html = html
      .replaceAll(`{{href${n}}}`, finalHref || "#")
      .replaceAll(`{{src${n}}}`, p.src || "https://via.placeholder.com/512x604.png?text=Image")
      .replaceAll(`{{alt${n}}}`, escapeHtml(p.alt || ""));
  });

  return html.trim();
}

function update3col() {
  utmFields3.style.display = utmToggle3.checked ? "grid" : "none";
  const html = buildHtml3col();
  output3colEl.value = html;
  preview3colEl.innerHTML = html;
}

copyBtn3col.addEventListener("click", async () => {
  try {
    await navigator.clipboard.writeText(output3colEl.value);
    copyStatus3col.textContent = "Afritað! Límdu í SendGrid Code Block.";
    setTimeout(() => copyStatus3col.textContent = "", 1500);
  } catch {
    copyStatus3col.textContent = "Gat ekki afritað — afritaðu handvirkt.";
  }
});

resetBtn3col.addEventListener("click", () => {
  products3col.forEach(p => { p.href=""; p.src=""; p.alt=""; });
  renderInputs3col();
  update3col();
});

[utmToggle3, utmSource3, utmMedium3, utmCampaign3].forEach(el =>
  el.addEventListener("input", update3col)
);


  /* ===================== TAB: 2-column recipes ===================== */
const NUM_RECIPES = 2;

const recipes2 = Array.from({ length: NUM_RECIPES }, () => ({
  href: "",
  src: ""
}));

const inputs2recipesEl = document.getElementById("inputs2recipes");
const output2recipesEl = document.getElementById("output2recipes");
const preview2recipesEl = document.getElementById("preview2recipes");
const copyBtn2recipes = document.getElementById("copyBtn2recipes");
const resetBtn2recipes = document.getElementById("resetBtn2recipes");
const copyStatus2recipes = document.getElementById("copyStatus2recipes");

function renderInputs2recipes() {
  inputs2recipesEl.innerHTML = "";

  recipes2.forEach((p, idx) => {
    const card = document.createElement("div");
    card.innerHTML = `
      <div style="border:1px solid #eee;border-radius:10px;padding:10px;">
        <strong>Dálkur ${idx + 1}</strong>

        <label>Vörutengill (href)</label>
        <input data-k="href" data-i="${idx}" placeholder="https://kronan.is/uppskriftir/..." value="${p.href}"/>

        <label>Myndatengill (src)</label>
        <input data-k="src" data-i="${idx}" placeholder="http://cdn.mcauto-images...png" value="${p.src}"/>
      </div>
    `;
    inputs2recipesEl.appendChild(card);
  });

  inputs2recipesEl.querySelectorAll("input").forEach(inp => {
    inp.addEventListener("input", e => {
      const i = Number(e.target.dataset.i);
      const k = e.target.dataset.k;
      recipes2[i][k] = e.target.value.trim();
      update2recipes();
    });
  });
}

// YOUR TEMPLATE KEPT VERBATIM (only href/src placeholders)
const TEMPLATE_2RECIPES = String.raw`<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  /* Mobile-only overrides (Gmail/Android friendly) */
  @media only screen and (max-width:640px),
         only screen and (max-device-width:640px) {

    .responsive-table, [class~="responsive-table"] {
      width: 100% !important;
      margin: 0 auto !important;
      padding: 0 !important; /* avoid double padding from wrapper */
    }

    .column, [class~="column"] {
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
      text-align: center !important;
      margin: 0 auto 10px !important;
      padding: 0 !important; /* prevent compounding widths */
    }

    /* Reliable 28px side gutters per card */
    .mobile-pad, [class~="mobile-pad"] {
      padding-left: 12px !important;
      padding-right: 12px !important;
    }

    .column img, [class~="column"] img {
      width: 100% !important;
      height: auto !important;
      max-width: 100% !important;
      display: block !important;
      margin: 0 auto !important;
    }
  }
  </style>
</head>

<body>
  <table class="responsive-table" width="100%" cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;">
    <tr>
      <!-- First Column -->
      <td class="column" width="48%" valign="top" style="padding:12px; font-size:14px; line-height:20px;">
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <!-- Mobile adds 28px L/R here -->
            <td class="mobile-pad" style="padding:0;">
              <a href="{{href1}}">
                <img border="0" style="display:block; max-width:100%; width:100%; height:auto;" width="300" alt="Maiskokur" src="{{src1}}">
              </a>
            </td>
          </tr>
        </table>
      

      <!-- Second Column -->
      </td><td class="column" width="48%" valign="top" style="padding:12px; font-size:14px; line-height:20px;">
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td class="mobile-pad" style="padding:0;">
              <a href="{{href2}}">
                <img border="0" style="display:block; max-width:100%; width:100%; height:auto;" width="300" alt="Maískokur" src="{{src2}}">
              </a>
            </td>
          </tr>
        </table>
      </td>
    
  </tr></table>
</body>`;

function buildHtml2recipes() {
  let html = TEMPLATE_2RECIPES;

  recipes2.forEach((p, idx) => {
    const n = idx + 1;
    html = html
      .replaceAll(`{{href${n}}}`, p.href || "#")
      .replaceAll(`{{src${n}}}`, p.src || "https://via.placeholder.com/512x517.png?text=Recipe");
  });

  return html.trim();
}

function update2recipes() {
  const html = buildHtml2recipes();
  output2recipesEl.value = html;
  preview2recipesEl.innerHTML = html;
}

copyBtn2recipes.addEventListener("click", async () => {
  try {
    await navigator.clipboard.writeText(output2recipesEl.value);
    copyStatus2recipes.textContent = "Afritað! Límdu í SendGrid Code Block.";
    setTimeout(() => copyStatus2recipes.textContent = "", 1500);
  } catch {
    copyStatus2recipes.textContent = "Gat ekki afritað — afritaðu handvirkt.";
  }
});

resetBtn2recipes.addEventListener("click", () => {
  recipes2.forEach(p => { p.href = ""; p.src = ""; });
  renderInputs2recipes();
  update2recipes();
});

/* Init */
renderInputs2recipes();
update2recipes();

/* ===================== TAB 2: Card builder ===================== */
/* EDIT THIS if your Worker URL changes */
const PROXY_URL =
  "https://workers-playground-patient-frog-cbe4.thorvaldura.workers.dev/?url=";
const IMG_PROXY_URL =
  "https://workers-playground-patient-frog-cbe4.thorvaldura.workers.dev/img?url=";
const RECIPE_PROXY_URL =
  "https://workers-playground-patient-frog-cbe4.thorvaldura.workers.dev/recipe?url=";

const productUrlCardEl = document.getElementById("productUrlCard");
const createBtnCard = document.getElementById("createBtnCard");
const copyBtnCard = document.getElementById("copyBtnCard");
const downloadPngBtnCard = document.getElementById("downloadPngBtnCard");
const previewCardEl = document.getElementById("previewCard");
const outputCardEl = document.getElementById("outputCard");
const statusCardEl = document.getElementById("statusCard");

/* NEW: editable overrides */
const manualNameEl = document.getElementById("manualName");
const manualPriceEl = document.getElementById("manualPrice");
const updateBtnCard = document.getElementById("updateBtnCard");
let lastProductData = null;

function getMergedCardData() {
  if (!lastProductData) return null;

  const nameOverride = manualNameEl.value.trim();
  const priceOverride = manualPriceEl.value.trim();

  const merged = { ...lastProductData };

  if (nameOverride) merged.name = nameOverride;

  if (priceOverride) {
    // keep consistent; renderer uses priceNew for discount if present
    merged.price = priceOverride;
    if (merged.priceNew) merged.priceNew = priceOverride;
  }

  return merged;
}

function renderCardFromState() {
  const merged = getMergedCardData();
  if (!merged) return;

  const cardHtml = buildCardHtml(merged);
  outputCardEl.value = cardHtml;
  previewCardEl.innerHTML = cardHtml;
}

createBtnCard.addEventListener("click", async () => {
  const url = productUrlCardEl.value.trim();
  if (!url) return setStatusCard("Settu inn slóð.", true);

  setStatusCard("Sæki vöru…", false);
  previewCardEl.innerHTML = "";
  outputCardEl.value = "";

  try {
    const data = await fetch(PROXY_URL + encodeURIComponent(url)).then(r => r.json());

    if (!data?.name || !data?.price || !data?.image) {
      throw new Error("Missing fields in JSON");
    }

    lastProductData = data;

    // Prefill editable fields
    manualNameEl.value = data.name || "";
    manualPriceEl.value = (data.priceNew || data.price) || "";

    renderCardFromState();

    setStatusCard("Tilbúið ✅", false);
  } catch (e) {
    console.error(e);
    setStatusCard("Tókst ekki að sækja vöru. Athugaðu slóð eða proxy.", true);
  }
});

updateBtnCard.addEventListener("click", () => {
  if (!lastProductData) return setStatusCard("Búðu fyrst til kort með slóð.", true);
  renderCardFromState();
  setStatusCard("Uppfært ✅", false);
  setTimeout(()=>setStatusCard("",false), 1200);
});

/* Optional: live update as you type */
[manualNameEl, manualPriceEl].forEach(el => {
  el.addEventListener("input", () => {
    if (!lastProductData) return;
    renderCardFromState();
  });
});

copyBtnCard.addEventListener("click", async () => {
  if (!outputCardEl.value) return;
  try {
    await navigator.clipboard.writeText(outputCardEl.value);
    setStatusCard("Afritað HTML ✅", false);
    setTimeout(()=>setStatusCard("",false), 1200);
  } catch {
    setStatusCard("Gat ekki afritað — afritaðu handvirkt.", true);
  }
});

downloadPngBtnCard.addEventListener("click", async () => {
  const node = previewCardEl.firstElementChild; // the card div
  if (!node) {
    setStatusCard("Engin kort til að sækja. Búðu fyrst til kort.", true);
    return;
  }

  setStatusCard("Bý til PNG…", false);

  try {
    if (document.fonts && document.fonts.ready) await document.fonts.ready;

    const canvas = await html2canvas(node, {
      backgroundColor: "#ffffff",
      scale: 1,
      useCORS: true
    });

    // --- Rounded corner mask (8px) ---
    const w = canvas.width;
    const h = canvas.height;
    const r = 16; // corner radius

    const out = document.createElement("canvas");
    out.width = w;
    out.height = h;

    const ctx = out.getContext("2d");
    ctx.clearRect(0, 0, w, h);

    // Rounded-rect clip path
    ctx.beginPath();
    ctx.moveTo(r, 0);
    ctx.arcTo(w, 0, w, h, r);
    ctx.arcTo(w, h, 0, h, r);
    ctx.arcTo(0, h, 0, 0, r);
    ctx.arcTo(0, 0, w, 0, r);
    ctx.closePath();
    ctx.clip();

    ctx.drawImage(canvas, 0, 0);

    const dataUrl = out.toDataURL("image/png");
    const a = document.createElement("a");
    a.href = dataUrl;
    a.download = `product-card-${Date.now()}.png`;
    document.body.appendChild(a);
    a.click();
    a.remove();

    setStatusCard("PNG sótt ✅", false);
    setTimeout(() => setStatusCard("", false), 1200);
  } catch (e) {
    console.error(e);
    setStatusCard("Tókst ekki að búa til PNG.", true);
  }
});


function buildCardHtml(p) {
  // Card size (must match .card-shell)
  const CARD_W = 420;
  const CARD_H = 479;

  // Layout tuned for 420×479
  const PADDING = 40;
  const GAP_AFTER_IMAGE = 12;
  const IMAGE_AREA_HEIGHT = 255;
  const PRICE_FONT_SIZE = 22;                 // matches your current price font-size
  const INFO_ICON_SIZE = Math.round(PRICE_FONT_SIZE * 1.5); // ~1.5x


  const imgSrc = IMG_PROXY_URL + encodeURIComponent(p.image);
  const hasDiscount = !!(p.priceOld && p.priceNew);
  const newPriceText = hasDiscount ? p.priceNew : p.price;
  
  const oldPriceHtml = hasDiscount
    ? `<span style="
          font-family:'Basic Sans', Arial, sans-serif;
          font-size:14px;
          font-weight:600;
          color:#787878;
          text-decoration:line-through;
          margin-right:10px;
        ">${escapeHtml(p.priceOld)}</span>`
    : "";

return `
<div id="product-card" style="
  width:${CARD_W}px;
  height:${CARD_H}px;
  border:1px solid #D9D9D9;
  border-radius:8px;
  overflow:hidden;
  background:#ffffff;
  box-sizing:border-box;
  font-family:'Basic Sans', Arial, sans-serif;
  padding:${PADDING}px;
  display:flex;
  flex-direction:column;
">

<!-- Image area -->
<div style="
  height:${IMAGE_AREA_HEIGHT}px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  margin-bottom:${GAP_AFTER_IMAGE}px;
  margin-top:22px;
">
  <img src="${imgSrc}" alt="${escapeHtml(p.name)}"
       style="
         max-width:100%;
         max-height:100%;
         object-fit:contain;
         display:block;
         border:0;
       " />
</div>

  <!-- Text area pinned to bottom -->
  <div style="margin-top:auto;">
    <div style="
      font-family:'Basic Sans', Arial, sans-serif;
      font-size:28px;
      font-weight:700;
      line-height:1.2;
      color:#111111;
      margin:0 0 22px 0;
      word-break:break-word;
    ">
      ${escapeHtml(p.name)}
    </div>

<div style="
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:12px;
  margin-bottom:22px;
">
  <!-- Price (left) -->
  <div style="line-height:1.2;">
    ${oldPriceHtml}
    <span style="
      font-family:'Basic Sans', Arial, sans-serif;
      font-size:${PRICE_FONT_SIZE}px;
      font-weight:500;
      color:#787878;
    ">
      ${escapeHtml(newPriceText)}
    </span>
  </div>

  <!-- Info icon (right) -->
  <div style="
    width:${INFO_ICON_SIZE}px;
    height:${INFO_ICON_SIZE}px;
    flex:0 0 ${INFO_ICON_SIZE}px;
    display:flex;
    align-items:center;
    justify-content:center;
  " aria-label="Info">
    <!-- inline SVG so it works in PNG export + copied HTML -->

<svg width="42" height="42" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_10192_6996)">
<g clip-path="url(#clip1_10192_6996)">
<path d="M1.25488 8.98862C1.55273 12.765 4.70145 15.7328 8.55225 15.7328C9.88194 15.7328 11.1159 15.3712 12.1903 14.7542C11.7116 11.031 8.54161 8.15889 4.68018 8.15889C3.44622 8.15889 2.28673 8.45674 1.25488 8.98862Z" fill="#03FFFF"/>
<path d="M8.54143 16.2755C4.21195 16.2755 0.690918 12.7438 0.690918 8.4143C0.690918 4.08481 4.21195 0.563782 8.54143 0.563782C12.8709 0.563782 16.392 4.08481 16.392 8.4143C16.392 12.7438 12.8709 16.2648 8.54143 16.2648V16.2755ZM8.54143 1.62754C4.79701 1.62754 1.75467 4.66988 1.75467 8.4143C1.75467 12.1587 4.79701 15.2011 8.54143 15.2011C12.2859 15.2011 15.3282 12.1587 15.3282 8.4143C15.3282 4.66988 12.2859 1.62754 8.54143 1.62754Z" fill="black"/>
<path d="M8.5414 12.7332C8.24355 12.7332 8.00952 12.4991 8.00952 12.2013V8.03136C8.00952 7.73351 8.24355 7.49948 8.5414 7.49948C8.83925 7.49948 9.07328 7.73351 9.07328 8.03136V12.2013C9.07328 12.4991 8.83925 12.7332 8.5414 12.7332Z" fill="black"/>
<path d="M8.54136 5.80811C8.86449 5.80811 9.12643 5.54617 9.12643 5.22304C9.12643 4.89992 8.86449 4.63798 8.54136 4.63798C8.21824 4.63798 7.9563 4.89992 7.9563 5.22304C7.9563 5.54617 8.21824 5.80811 8.54136 5.80811Z" fill="black"/>
</g>
</g>
<defs>
<clipPath id="clip0_10192_6996">
<rect width="17.0201" height="17.0201" fill="white"/>
</clipPath>
<clipPath id="clip1_10192_6996">
<rect width="15.7117" height="15.7117" fill="white" transform="translate(0.690918 0.563782)"/>
</clipPath>
</defs>
</svg>

  </div>
</div>

`.trim();
}

function setStatusCard(msg, isError){
  statusCardEl.textContent = msg;
  statusCardEl.style.color = isError ? "#b00020" : "#333";
}

/* ===================== Helpers ===================== */
function escapeHtml(str) {
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function addUTM(url, utmObj) {
  if (!url) return "#";
  try {
    const u = new URL(url);
    Object.entries(utmObj).forEach(([k, v]) => {
      if (!v) return;
      if (!u.searchParams.has(k)) u.searchParams.set(k, v);
    });
    return u.toString();
  } catch {
    return url;
  }
}

/* ===================== TAB 3: Recipe card builder ===================== */
const recipeUrlCardEl = document.getElementById("recipeUrlCard");
const createBtnRecipe = document.getElementById("createBtnRecipe");
const updateBtnRecipe = document.getElementById("updateBtnRecipe");
const copyBtnRecipe = document.getElementById("copyBtnRecipe");
const downloadPngBtnRecipe = document.getElementById("downloadPngBtnRecipe");
const previewRecipeEl = document.getElementById("previewRecipe");
const outputRecipeEl = document.getElementById("outputRecipe");
const statusRecipeEl = document.getElementById("statusRecipe");

const manualRecipeTitleEl = document.getElementById("manualRecipeTitle");
const manualRecipeLikesEl = document.getElementById("manualRecipeLikes");
const manualRecipeServingsEl = document.getElementById("manualRecipeServings");
const manualRecipePrepEl = document.getElementById("manualRecipePrep");
const manualRecipeCookEl = document.getElementById("manualRecipeCook");
const manualRecipeTotalEl = document.getElementById("manualRecipeTotal");

let lastRecipeData = null;

function setStatusRecipe(msg, isError){
  statusRecipeEl.textContent = msg;
  statusRecipeEl.style.color = isError ? "#b00020" : "#333";
}

function mergedRecipeData() {
  if (!lastRecipeData) return null;
  const m = { ...lastRecipeData };

  const v = (el) => (el?.value || "").trim();

  if (v(manualRecipeTitleEl)) m.title = v(manualRecipeTitleEl);
  if (v(manualRecipeLikesEl)) m.likes = v(manualRecipeLikesEl);
  if (v(manualRecipeServingsEl)) m.servings = v(manualRecipeServingsEl);
  if (v(manualRecipePrepEl)) m.prep = v(manualRecipePrepEl);
  if (v(manualRecipeCookEl)) m.cook = v(manualRecipeCookEl);
  if (v(manualRecipeTotalEl)) m.total = v(manualRecipeTotalEl);

  return m;
}

function renderRecipeFromState() {
  const data = mergedRecipeData();
  if (!data) return;

  const html = buildRecipeCardHtml(data);
  outputRecipeEl.value = html;
  previewRecipeEl.innerHTML = html;
}

createBtnRecipe.addEventListener("click", async () => {
  const url = recipeUrlCardEl.value.trim();
  if (!url) return setStatusRecipe("Settu inn slóð.", true);

  setStatusRecipe("Sæki uppskrift…", false);
  previewRecipeEl.innerHTML = "";
  outputRecipeEl.value = "";

  try {
    const data = await fetch(RECIPE_PROXY_URL + encodeURIComponent(url)).then(r => r.json());

    if (!data?.title || !data?.image) throw new Error("Missing fields (title/image)");

    lastRecipeData = data;

    // Prefill
    manualRecipeTitleEl.value = data.title || "";
    manualRecipeLikesEl.value = data.likes || "";
    manualRecipeServingsEl.value = data.servings || "";
    manualRecipePrepEl.value = data.prep || "";
    manualRecipeCookEl.value = data.cook || "";
    manualRecipeTotalEl.value = data.total || "";

    renderRecipeFromState();
    setStatusRecipe("Tilbúið ✅", false);
  } catch (e) {
    console.error(e);
    setStatusRecipe("Tókst ekki að sækja uppskrift. Athugaðu slóð eða proxy.", true);
  }
});

updateBtnRecipe.addEventListener("click", () => {
  if (!lastRecipeData) return setStatusRecipe("Búðu fyrst til kort með slóð.", true);
  renderRecipeFromState();
  setStatusRecipe("Uppfært ✅", false);
  setTimeout(()=>setStatusRecipe("",false), 1200);
});

[manualRecipeTitleEl, manualRecipeLikesEl, manualRecipeServingsEl, manualRecipePrepEl, manualRecipeCookEl, manualRecipeTotalEl]
  .forEach(el => el.addEventListener("input", () => { if (lastRecipeData) renderRecipeFromState(); }));

copyBtnRecipe.addEventListener("click", async () => {
  if (!outputRecipeEl.value) return;
  try {
    await navigator.clipboard.writeText(outputRecipeEl.value);
    setStatusRecipe("Afritað HTML ✅", false);
    setTimeout(()=>setStatusRecipe("",false), 1200);
  } catch {
    setStatusRecipe("Gat ekki afritað — afritaðu handvirkt.", true);
  }
});

downloadPngBtnRecipe.addEventListener("click", async () => {
const node = document.getElementById("recipe-card");
if (!node) return setStatusRecipe("Engin uppskrift í forskoðun — ýttu á Create recipe card.", true);


  setStatusRecipe("Bý til PNG…", false);

  try {
    if (document.fonts && document.fonts.ready) await document.fonts.ready;

const canvas = await html2canvas(node, {
  backgroundColor: "#ffffff",
  scale: 1,
  useCORS: true
});

    // Rounded corner mask (matches card radius)
    const w = canvas.width, h = canvas.height;
    const r = 16; // your design looks like 16px; change if needed

    const out = document.createElement("canvas");
    out.width = w; out.height = h;
    const ctx = out.getContext("2d");

    ctx.clearRect(0, 0, w, h);
    ctx.beginPath();
    ctx.moveTo(r, 0);
    ctx.arcTo(w, 0, w, h, r);
    ctx.arcTo(w, h, 0, h, r);
    ctx.arcTo(0, h, 0, 0, r);
    ctx.arcTo(0, 0, w, 0, r);
    ctx.closePath();
    ctx.clip();
    ctx.drawImage(canvas, 0, 0);

    const dataUrl = out.toDataURL("image/png");
    const a = document.createElement("a");
    a.href = dataUrl;
    a.download = `recipe-card-${Date.now()}.png`;
    document.body.appendChild(a);
    a.click();
    a.remove();

    setStatusRecipe("PNG sótt ✅", false);
    setTimeout(() => setStatusRecipe("", false), 1200);
  } catch (e) {
    console.error(e);
    setStatusRecipe("Tókst ekki að búa til PNG.", true);
  }
});

function buildRecipeCardHtml(d) {
  // Fixed size per your requirement
  const CARD_W = 512;
  const CARD_H = 517;
  const RADIUS = 16;
  const BORDER = "#D9D9D9";

  // Image via IMG proxy for PNG export reliability
  const imgSrc = IMG_PROXY_URL + encodeURIComponent(d.image);

  // Safe fallbacks
  const likes = d.likes || "";
  const servings = d.servings || "";
  const prep = d.prep || "";
  const cook = d.cook || "";
  const total = d.total || "";
  const title = d.title || "";

return `
<div id="recipe-card" style="
  width:${CARD_W}px;
  height:${CARD_H}px;
  border:1px solid ${BORDER};
  border-radius:${RADIUS}px;
  overflow:hidden;
  background:#ffffff;
  box-sizing:border-box;
  font-family:'Basic Sans', Arial, sans-serif;
">

  <!-- Top image area -->
  <div style="
    position:relative;
    height:300px;
    width:100%;
    overflow:hidden;
  ">
    <img src="${imgSrc}" alt="${escapeHtml(title)}" style="
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      border:0;
    "/>

    <!-- Likes pill -->
    <div style="
      position:absolute;
      left:16px;
      top:16px;
      background:#ffffff;
      background-color:#ffffff;
      opacity:1;
      border-radius:12px;
      padding:8px 12px;
      display:flex;
      align-items:center;
      gap:8px;
      box-shadow:0 2px 10px rgba(0,0,0,0.12);
      font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      font-weight:700;
      color:#111;
    ">
      <svg width="20" height="18" viewBox="0 0 20 18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M10 17s-7-4.4-9.2-8.6C-1.3 4.2 1.1 0.9 5 1c2 .1 3.3 1.2 5 3 1.7-1.8 3-2.9 5-3 3.9-.1 6.3 3.2 4.2 7.4C17 12.6 10 17 10 17z" fill="#FF4B4B"/>
      </svg>
      <span>${escapeHtml(likes)}</span>
    </div>
  </div>

  <!-- Bottom content -->
  <div style="
    height:calc(${CARD_H}px - 300px);
    padding:22px 24px 18px 24px;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
  ">
    <div style="
      font-size:28px;
      font-weight:700;
      line-height:1.15;
      color:#111;
      margin:0;
    ">
      ${escapeHtml(title)}
    </div>

    <div style="height:1px;background:#E6E6E6;margin:14px 0 14px 0;"></div>

    <div style="
      display:flex;
      gap:18px;
      justify-content:space-between;
      align-items:flex-end;
    ">
      ${metaBlock("Undirbúningur", prep, "whisk")}
      ${metaBlock("Eldunartími", cook, "pot")}
      ${metaBlock("Samtals", total, "chef")}
    </div>
  </div>
</div>
`.trim();
}

function metaBlock(label, value, icon) {
  return `
  <div style="flex:1;min-width:0;">
    <div style="
      font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      font-size:16px;
      color:#111;
      margin-bottom:10px;
    ">${escapeHtml(label)}</div>

    <div style="display:flex;align-items:center;gap:10px;">
      ${iconSvg(icon)}
      <div style="
        font-family:'Basic Sans', Arial, sans-serif;
        font-size:18px;
        font-weight:500;
        color:#111;
      ">${escapeHtml(value)}</div>
    </div>
  </div>
  `;
}

function iconSvg(kind) {
  if (kind === "whisk") { // Undirbúningur
    return `<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.5088 9.47681H1.92234C0.856242 9.47681 0 10.3414 0 11.3991C0 12.4568 0.864636 13.3215 1.92234 13.3215H11.5088C12.5749 13.3215 13.4311 12.4568 13.4311 11.3991C13.4311 10.3414 12.5665 9.47681 11.5088 9.47681Z" fill="#00C6CC"/>
<path d="M11.6682 2.92082C12.3822 2.92082 12.961 2.34203 12.961 1.62807C12.961 0.914104 12.3822 0.335327 11.6682 0.335327C10.9543 0.335327 10.3755 0.914104 10.3755 1.62807C10.3755 2.34203 10.9543 2.92082 11.6682 2.92082Z" fill="#FFE800"/>
<path d="M9.64514 6.37096C9.54441 6.37096 9.45205 6.33738 9.36811 6.27023L7.43739 4.59973C7.35345 4.52418 7.30307 4.42345 7.29468 4.31432C7.29468 4.20519 7.31986 4.09606 7.39541 4.01212L10.3587 0.587177C10.9715 -0.117958 12.0459 -0.201908 12.7511 0.410888C13.0952 0.704694 13.3051 1.11603 13.3303 1.56933C13.3639 2.02263 13.2212 2.45914 12.919 2.80331L9.95573 6.22825C9.87179 6.32059 9.75426 6.37096 9.63674 6.37096H9.64514ZM8.30202 4.23876L9.60315 5.36363L12.2894 2.25767C12.4405 2.08138 12.516 1.86313 12.4993 1.63648C12.4825 1.40983 12.3817 1.19997 12.2054 1.04887C11.8445 0.73828 11.3072 0.780244 10.9966 1.13281L8.31043 4.23876H8.30202Z" fill="black"/>
<path d="M5.38064 12.2638C4.59157 12.2638 3.82767 11.9784 3.20648 11.4412C2.36704 10.7109 1.94733 9.66155 2.06485 8.55348C2.18237 7.44541 2.80354 6.50525 3.7773 5.968L7.50444 3.91135C7.65554 3.8274 7.84862 3.8442 7.98293 3.96173L9.91365 5.63221C10.048 5.74974 10.0899 5.93442 10.0312 6.09391L8.53697 10.0813C8.14243 11.1222 7.30298 11.8777 6.22849 12.1547C5.94308 12.2303 5.66606 12.2638 5.38064 12.2638ZM3.75212 10.8116C4.3817 11.3572 5.21276 11.5503 6.01863 11.3488C6.8245 11.1474 7.46248 10.5766 7.75629 9.79587L9.14977 6.08552L7.65556 4.79277L4.18024 6.7067C3.44992 7.10964 2.97984 7.81477 2.89589 8.64582C2.81195 9.47687 3.12253 10.266 3.75212 10.8116Z" fill="black"/>
<path d="M2.71143 10.5345C2.6023 10.5345 2.48479 10.4926 2.40924 10.4002C2.24974 10.2323 2.25813 9.96371 2.42602 9.80422L8.0671 4.52411C8.23498 4.36461 8.5036 4.373 8.66309 4.54089C8.82259 4.70878 8.8142 4.9774 8.64631 5.1369L3.00524 10.417C2.92129 10.4926 2.82056 10.5261 2.71983 10.5261L2.71143 10.5345Z" fill="black"/>
<path d="M4.65883 12.0958C4.57489 12.0958 4.49095 12.0706 4.42379 12.0202C4.23072 11.8859 4.18874 11.6257 4.31466 11.4326L8.66298 5.16195C8.79729 4.96888 9.05753 4.9269 9.2506 5.05282C9.44368 5.18713 9.48565 5.44737 9.35974 5.64044L5.01139 11.9111C4.92744 12.0286 4.80152 12.0958 4.66721 12.0958H4.65883Z" fill="black"/>
</svg>`;
  }

  if (kind === "pot") { // Eldunartími
    return `<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_9642_850)">
<path d="M6.70696 7.46274C7.47656 7.46274 8.10044 6.83886 8.10044 6.06926C8.10044 5.29967 7.47656 4.67578 6.70696 4.67578C5.93736 4.67578 5.31348 5.29967 5.31348 6.06926C5.31348 6.83886 5.93736 7.46274 6.70696 7.46274Z" fill="#00C6CC"/>
<path d="M6.70694 3.97907C7.77789 3.97907 8.64606 3.11089 8.64606 2.03995C8.64606 0.969002 7.77789 0.10083 6.70694 0.10083C5.63599 0.10083 4.76782 0.969002 4.76782 2.03995C4.76782 3.11089 5.63599 3.97907 6.70694 3.97907Z" fill="#00C6CC"/>
<path d="M3.68485 12.9527H9.76243C10.2913 12.9527 10.7446 12.6589 10.9796 12.2224C10.1486 10.7114 8.53683 9.68726 6.69005 9.68726C4.84327 9.68726 3.28192 10.6862 2.43408 12.1636C2.66073 12.6337 3.13081 12.9527 3.68485 12.9527Z" fill="#FFE800"/>
<path d="M9.7961 13.3723H3.65975C2.6776 13.3723 1.88013 12.5749 1.88013 11.5927V6.07756C1.88013 5.84252 2.06481 5.65784 2.29985 5.65784H11.1644C11.3994 5.65784 11.5841 5.84252 11.5841 6.07756V11.5927C11.5841 12.5749 10.7867 13.3723 9.8045 13.3723H9.7961ZM2.71957 6.48889V11.5843C2.71957 12.1048 3.13929 12.5245 3.65975 12.5245H9.7961C10.3166 12.5245 10.7363 12.1048 10.7363 11.5843V6.48889H2.71117H2.71957Z" fill="black"/>
<path d="M2.29997 8.27691H1.38497C0.66305 8.27691 0.0754395 7.6893 0.0754395 6.96738C0.0754395 6.24545 0.66305 5.65784 1.38497 5.65784H2.29997C2.53501 5.65784 2.71969 5.84252 2.71969 6.07756V7.85719C2.71969 8.09223 2.53501 8.27691 2.29997 8.27691ZM1.37657 6.48889C1.11634 6.48889 0.906483 6.69875 0.906483 6.95898C0.906483 7.21921 1.11634 7.42907 1.37657 7.42907H1.87184V6.48889H1.37657Z" fill="black"/>
<path d="M12.071 8.27691H11.1561C10.921 8.27691 10.7363 8.09223 10.7363 7.85719V6.07756C10.7363 5.84252 10.921 5.65784 11.1561 5.65784H12.071C12.793 5.65784 13.3806 6.24545 13.3806 6.96738C13.3806 7.6893 12.793 8.27691 12.071 8.27691ZM11.5758 7.43746H12.071C12.3313 7.43746 12.5411 7.22761 12.5411 6.96738C12.5411 6.70715 12.3313 6.49728 12.071 6.49728H11.5758V7.43746Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_9642_850">
<rect width="13.4311" height="13.4311" fill="white"/>
</clipPath>
</defs>
</svg>`;
  }

  // "chef" => Samtals
  return `<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_9642_857)">
<path d="M9.56132 9.95581C9.05765 8.88971 7.97475 8.151 6.71558 8.151C5.45641 8.151 4.37354 8.88971 3.86987 9.95581H9.56132Z" fill="#FFE800"/>
<path d="M3.05558 7.30331C1.77123 7.30331 0.721924 6.254 0.721924 4.96965C0.721924 3.68529 1.77123 2.63599 3.05558 2.63599C3.44173 2.63599 3.81948 2.72833 4.15525 2.913C4.35672 3.02213 4.44066 3.27397 4.33153 3.48383C4.2224 3.68529 3.97058 3.76084 3.76071 3.66011C3.54246 3.54259 3.30742 3.48383 3.06399 3.48383C2.24133 3.48383 1.56977 4.15538 1.56977 4.97804C1.56977 5.8007 2.24133 6.47226 3.06399 6.47226C3.23187 6.47226 3.39976 6.44707 3.55926 6.38831C3.77751 6.31276 4.02094 6.42189 4.09649 6.64014C4.17204 6.8584 4.06292 7.10184 3.84466 7.17739C3.59283 7.26973 3.33261 7.3117 3.06399 7.3117L3.05558 7.30331Z" fill="black"/>
<path d="M10.2749 7.30346C9.22555 7.30346 8.30214 6.59832 8.02512 5.58259C7.96636 5.35594 8.09228 5.12929 8.31893 5.07053C8.54558 5.01177 8.77225 5.14608 8.83101 5.36434C9.00729 6.01071 9.6033 6.46401 10.2749 6.46401C11.0975 6.46401 11.7691 5.79245 11.7691 4.9698C11.7691 4.14714 11.0975 3.47558 10.2749 3.47558C10.0566 3.47558 9.84672 3.51756 9.65365 3.6099C9.44379 3.71063 9.19198 3.60989 9.09964 3.40843C8.9989 3.19857 9.09963 2.94673 9.3011 2.85439C9.61169 2.71169 9.93908 2.64453 10.2749 2.64453C11.5592 2.64453 12.6085 3.69384 12.6085 4.97819C12.6085 6.26254 11.5592 7.31185 10.2749 7.31185V7.30346Z" fill="black"/>
<path d="M4.81845 5.89314C4.71772 5.89314 4.6086 5.85117 4.53305 5.77562C3.89507 5.17122 3.54248 4.34856 3.54248 3.46715C3.54248 3.3916 3.54248 3.32444 3.54248 3.24889C3.65161 1.58679 5.04509 0.285645 6.71558 0.285645C8.38608 0.285645 9.74598 1.5616 9.88869 3.19852C9.90548 3.43357 9.7376 3.63503 9.50255 3.65182C9.26751 3.66861 9.06603 3.50072 9.04924 3.26568C8.94851 2.06527 7.92439 1.12509 6.71558 1.12509C5.50678 1.12509 4.45748 2.08206 4.38193 3.30765C4.38193 3.35802 4.38193 3.41678 4.38193 3.46715C4.38193 4.11352 4.64218 4.71792 5.11227 5.17122C5.28015 5.33071 5.28854 5.59934 5.12905 5.76723C5.0451 5.85117 4.93596 5.90154 4.82683 5.90154L4.81845 5.89314Z" fill="black"/>
<path d="M9.7374 10.3758H3.6934C3.45836 10.3758 3.27368 10.1911 3.27368 9.95608V6.77458C3.27368 6.53954 3.45836 6.35486 3.6934 6.35486C3.92845 6.35486 4.11313 6.53954 4.11313 6.77458V9.53636H9.31768V6.98444C9.31768 6.7494 9.50235 6.56472 9.7374 6.56472C9.97244 6.56472 10.1571 6.7494 10.1571 6.98444V9.95608C10.1571 10.1911 9.97244 10.3758 9.7374 10.3758Z" fill="black"/>
<path d="M9.04914 11.173H4.31468C3.77226 11.173 3.33252 11.6127 3.33252 12.1551C3.33252 12.6976 3.77226 13.1373 4.31468 13.1373H9.04914C9.59157 13.1373 10.0313 12.6976 10.0313 12.1551C10.0313 11.6127 9.59157 11.173 9.04914 11.173Z" fill="#00C6CC"/>
</g>
<defs>
<clipPath id="clip0_9642_857">
<rect width="13.4311" height="13.4311" fill="white"/>
</clipPath>
</defs>
</svg>`;
}



/* Init */
renderInputs3col();
update3col();
</script>
</body>
</html>




















